!function(t,e,i,s){t.imageMapProShapeDefaults={id:"spot-0",title:"",type:"spot",x:-1,y:-1,width:44,height:44,connected_to:"",use_connected_shape_tooltip:0,text:{text:"Text",font_family:"sans-serif",font_size:16,font_weight:400,text_color:"#000000",text_opacity:1},actions:{click:"no-action",link:"#",open_link_in_new_window:1,script:""},default_style:{opacity:1,border_radius:50,background_color:"#000000",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#000000",fill_opacity:.4,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",use_icon:1,icon_type:"library",icon_svg_path:"M409.81,160.113C409.79,71.684,338.136,0,249.725,0C161.276,0,89.583,71.684,89.583,160.113     c0,76.325,119.274,280.238,151.955,334.638c1.72,2.882,4.826,4.641,8.178,4.641c3.351,0,6.468-1.759,8.168-4.631     C290.545,440.361,409.81,236.438,409.81,160.113z M249.716,283.999c-68.303,0-123.915-55.573-123.915-123.895     c0-68.313,55.592-123.895,123.915-123.895s123.876,55.582,123.876,123.895S318.029,283.999,249.716,283.999z",icon_svg_viewbox:"0 0 499.392 499.392",icon_fontawesome_id:"map-marker",icon_fill:"#000000",icon_url:"",icon_is_pin:1,icon_shadow:0},mouseover_style:{opacity:1,border_radius:50,background_color:"#ffffff",background_opacity:.4,border_width:0,border_style:"solid",border_color:"#ffffff",border_opacity:1,fill:"#ffffff",fill_opacity:.4,stroke_color:"#ffffff",stroke_opacity:.75,stroke_width:0,stroke_dasharray:"10 10",stroke_linecap:"round",icon_fill:"#000000"},tooltip_style:{enable_tooltip:1,buffer:40,border_radius:5,padding:20,background_color:"#000000",background_opacity:.9,position:"top",width:300,auto_width:0},tooltip_content:{content_type:"plain-text",plain_text:"Lorem Ipsum",plain_text_color:"#ffffff",squares_settings:{containers:[{id:"sq-container-403761",settings:{elements:[{settings:{name:"Paragraph",iconClass:"fa fa-paragraph"}}]}}]}},points:[],vs:[]},t.imageMapProEditorDefaults={id:0,editor:{previewMode:0,selected_shape:-1,tool:"spot",zoom:1,state:{dragging:!1}},runtime:{is_fullscreen:0},general:{name:"",shortcode:"",width:1280,height:776,naturalWidth:1280,naturalHeight:776,responsive:1,preserve_quality:1,pageload_animation:"none",center_image_map:0},image:{url:"https://webcraftplugins.com/uploads/image-map-pro/demo.jpg"},fullscreen:{enable_fullscreen_mode:0,start_in_fullscreen_mode:0,fullscreen_background:"#000000",fullscreen_button_position:1,fullscreen_button_type:"icon_and_text",fullscreen_button_color:"#ffffff",fullscreen_button_text_color:"#222222"},tooltips:{enable_tooltips:1,show_tooltips:"mouseover",sticky_tooltips:0,constrain_tooltips:1,tooltip_animation:"none",fullscreen_tooltips:"mobile"},zooming:{enable_zooming:0,max_zoom:16,limit_max_zoom_to_image_size:0,enable_zoom_buttons:1,enable_navigator:1,zoom_button_text_color:"#000000",zoom_button_background_color:"#ffffff"},custom_code:{custom_css:"",custom_js:""},spots:[]}}(jQuery,window,document),function(a,t,e,i){var r=new Array;function s(t){this.settings=t,this.containers=[],this.init()}function o(t){this.settings=t,this.elements=[],this.init()}a.squaresRendererRegisterElement=function(t){r[t.name]=t},a.squaresRendererRenderObject=function(e){if("object"!=typeof e)try{e=JSON.parse(e)}catch(t){return console.log(t),console.log("Squares renderer failed to parse JSON: "),console.log(e),""}return new s(e).render()},s.prototype.init=function(){for(var t=0;t<this.settings.containers.length;t++)this.containers[t]=new o(this.settings.containers[t])},s.prototype.render=function(){for(var t="",e=0;e<this.containers.length;e++)t+=this.containers[e].render();return t},o.prototype.init=function(){if(this.settings.settings)for(var t=0;t<this.settings.settings.elements.length;t++)this.elements[t]=new l(this.settings.settings.elements[t])},o.prototype.render=function(){var t="";if(t+='<div class="squares-container">',this.settings.settings)for(var e=0;e<this.settings.settings.elements.length;e++)t+=this.elements[e].render();return(t+='\t<div class="squares-clear"></div>')+"</div>"};var n={layout:{box_model:{margin:{top:0,bottom:0,left:0,right:0},padding:{top:10,bottom:10,left:10,right:10}},use_grid:1,column_span:{xs:{use:0,class:"sq-col-xs-12",visible:0},sm:{use:0,class:"sq-col-sm-12",visible:0},md:{use:0,class:"sq-col-md-12",visible:1},lg:{use:1,class:"sq-col-lg-12",visible:1}},width:"100",auto_width:1,height:"100",auto_height:1},style:{background_color:"#ffffff",background_opacity:"0",opacity:"1",box_shadow:"none",border_width:"0",border_style:"none",border_color:"#000000",border_opacity:"1",border_radius:"0"},font:{font_family:"sans-serif",font_size:"14",font_weight:"normal",font_style:"normal",line_height:"22",text_color:"#ffffff",text_align:"left",text_decoration:"none",text_transform:"none",text_shadow:""},general:{id:"",classes:"",css:""}};function l(t){this.settings=t.settings,this.defaults=a.extend(!0,{},n),this.elementSpecificDefaults={},this.options=i,this.init(t)}function h(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}l.prototype.init=function(t){var e=a.extend(!0,{},r[this.settings.name].controls);for(var i in e){var s=e[i];for(var o in this.elementSpecificDefaults[i]={},s){var n=s[o];this.elementSpecificDefaults[i][o]=n.default}}this.defaults=a.extend(!0,{},this.defaults,this.elementSpecificDefaults),this.options=a.extend(!0,{},this.defaults,t.options)},l.prototype.render=function(){var t="";return t+='<div class="squares-element '+this.generateLayoutClass(this.options.layout)+'" style="'+this.generateCSS(this.options)+'">',(t+=r[this.settings.name].render(this.options))+"</div>"},l.prototype.generateLayoutClass=function(){var t=this.options.layout;if(1!=parseInt(t.use_grid,10))return"";var e="",i=t.column_span;return 1==parseInt(i.xs.use,10)&&(e+=i.xs.class+" ",0==parseInt(i.xs.visible,10)&&(e+="sq-hidden-xs ")),1==parseInt(i.sm.use,10)&&(e+=i.sm.class+" ",0==parseInt(i.sm.visible,10)&&(e+="sq-hidden-sm ")),1==parseInt(i.md.use,10)&&(e+=i.md.class+" ",0==parseInt(i.md.visible,10)&&(e+="sq-hidden-md ")),1==parseInt(i.lg.use,10)&&(e+=i.lg.class+" ",0==parseInt(i.lg.visible,10)&&(e+="sq-hidden-lg ")),e},l.prototype.generateCSS=function(){var t="";t+="margin-top: "+(i=this.options.layout).box_model.margin.top+"px; ",t+="margin-bottom: "+i.box_model.margin.bottom+"px; ",t+="margin-left: "+i.box_model.margin.left+"px; ",t+="margin-right: "+i.box_model.margin.right+"px; ",t+="padding-top: "+i.box_model.padding.top+"px; ",t+="padding-bottom: "+i.box_model.padding.bottom+"px; ",t+="padding-left: "+i.box_model.padding.left+"px; ",t+="padding-right: "+i.box_model.padding.right+"px; ",1==parseInt(i.use_grid,10)||(1==parseInt(i.auto_width,10)?t+="width: auto; ":""===i.width||isNaN(i.width)||(t+="width: "+i.width+"px; "),1==parseInt(i.auto_height,10)?t+="height: auto; ":""===i.height||isNaN(i.height)||(t+="height: "+i.height+"px; ")),t+="float: left; ";var e,i=this.options.font;return this.options.fontStyles="",i&&(t+="font-family: "+i.font_family+"; ",this.options.fontStyles+="font-family: "+i.font_family+"; ",t+="font-size: "+i.font_size+"px; ",this.options.fontStyles+="font-size: "+i.font_size+"px; ",t+="font-weight: "+i.font_weight+"; ",this.options.fontStyles+="font-weight: "+i.font_weight+"; ",t+="font-style: "+i.font_style+"; ",this.options.fontStyles+="font-style: "+i.font_style+"; ",t+="line-height: "+i.line_height+"px; ",this.options.fontStyles+="line-height: "+i.line_height+"px; ",t+="color: "+i.text_color+"; ",this.options.fontStyles+="color: "+i.text_color+"; ",t+="text-align: "+i.text_align+"; ",this.options.fontStyles+="text-align: "+i.text_align+"; ",t+="text-decoration: "+i.text_decoration+"; ",this.options.fontStyles+="text-decoration: "+i.text_decoration+"; ",t+="text-transform: "+i.text_transform+"; ",this.options.fontStyles+="text-transform: "+i.text_transform+"; ",t+="text-shadow: "+i.text_shadow+"; ",this.options.fontStyles+="text-shadow: "+i.text_shadow+"; "),(i=this.options.style)&&(t+="background-color: rgba("+(e=h(i.background_color)).r+", "+e.g+", "+e.b+", "+i.background_opacity+"); ",t+="opacity: "+i.opacity+"; ",t+="box-shadow: "+i.box_shadow+"; ",t+="border-width: "+i.border_width+"px; ",t+="border-style: "+i.border_style+"; ",t+="border-color: rgba("+(e=h(i.border_color)).r+", "+e.g+", "+e.b+", "+i.border_opacity+"); ",t+="border-radius: "+i.border_radius+"px; "),t}}(jQuery,window,document),function(t,e,i,s){var o={name:"Paragraph",iconClass:"fa fa-paragraph",controls:{text:{text:{name:"Text",type:"textarea",default:"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas."}}},controlGroupIcons:{text:"fa fa-ellipsis-h"},content:function(){var t=this.controls.text.text.getVal();return t=t.replace(/\\(.)/gm,"$1"),'<p id="'+this.controls.general.id.getVal()+'" style="'+this.controls.general.css.getVal()+this.fontStyles+' margin: 0; padding: 0;" class="'+this.controls.general.classes.getVal()+'">'+t+"</p>"},render:function(t){var e=t.text.text;return e=e.replace(/\\(.)/gm,"$1"),'<p id="'+t.general.id+'" style="'+t.general.css+t.fontStyles+' margin: 0; padding: 0;" class="'+t.general.classes+'">'+e+"</p>"}};t.squaresRegisterElement&&t.squaresRegisterElement(o),t.squaresRendererRegisterElement(o);var n={name:"Heading",iconClass:"fa fa-header",controls:{heading:{text:{name:"Text",type:"text",default:"Lorem Ipsum"},heading:{name:"Heading",type:"select",options:["h1","h2","h3"],default:"h3"}}},controlGroupIcons:{heading:"fa fa-header"},content:function(){return"<"+this.controls.heading.heading.getVal()+' id="'+this.controls.general.id.getVal()+'" style="'+this.controls.general.css.getVal()+this.fontStyles+' margin: 0; padding: 0;" class="'+this.controls.general.classes.getVal()+'">'+this.controls.heading.text.getVal()+"</"+this.controls.heading.heading.getVal()+">"},render:function(t){return"<"+t.heading.heading+' id="'+t.general.id+'" style="'+t.general.css+t.fontStyles+' margin: 0; padding: 0;" class="'+t.general.classes+'">'+t.heading.text+"</"+t.heading.heading+">"}};t.squaresRegisterElement&&t.squaresRegisterElement(n),t.squaresRendererRegisterElement(n);var a={name:"Image",iconClass:"fa fa-camera",controls:{image:{url:{name:"Image URL",type:"wp media upload",default:"https://webcraftplugins.com/uploads/placeholder_image.png"},image_is_a_link:{name:"Image is a Link",type:"switch",default:0},link_to:{name:"Link to",type:"text",default:"#"}}},controlGroupIcons:{image:"fa fa-camera"},useFontControls:!1,content:function(){var t="";return 1==parseInt(this.controls.image.image_is_a_link.getVal(),10)&&(t+='<a href="'+this.controls.image.link_to.getVal()+'">'),t+='<img src="'+this.controls.image.url.getVal()+'" id="'+this.controls.general.id.getVal()+'" style="'+this.controls.general.css.getVal()+'" class="'+this.controls.general.classes.getVal()+'">',1==parseInt(this.controls.image.image_is_a_link.getVal(),10)&&(t+="</a>"),t},render:function(t){var e="";return 1==parseInt(t.image.image_is_a_link,10)&&(e+='<a href="'+t.image.link_to+'">'),e+='<img src="'+t.image.url+'" id="'+t.general.id+'" style="'+t.general.css+'" class="'+t.general.classes+'">',1==parseInt(t.image.image_is_a_link,10)&&(e+="</a>"),e}};t.squaresRegisterElement&&t.squaresRegisterElement(a),t.squaresRendererRegisterElement(a);var r={name:"Video",iconClass:"fa fa-video-camera",controls:{video:{mp4_url:{name:"MP4 URL",type:"text",default:"http://webcraftplugins.com/uploads/example_video.mp4"},webm_url:{name:"WEBM URL",type:"text",default:"http://webcraftplugins.com/uploads/example_video.webm"},ogv_url:{name:"OGV URL",type:"text",default:"http://webcraftplugins.com/uploads/example_video.ogv"},video_is_a_link:{name:"Video is a Link",type:"switch",default:0},link_to:{name:"Link to",type:"text",default:"#"},autoplay:{name:"Autoplay",type:"switch",default:0},loop:{name:"Loop",type:"switch",default:0},controls:{name:"Controls",type:"switch",default:0}}},useFontControls:!1,controlGroupIcons:{video:"fa fa-video-camera"},content:function(){var t="";1==parseInt(this.controls.video.video_is_a_link.getVal(),10)&&(t+='<a href="'+this.controls.video.link_to.getVal()+'">');var e="";return 1==parseInt(this.controls.video.autoplay.getVal(),10)&&(e+=" autoplay "),1==parseInt(this.controls.video.loop.getVal(),10)&&(e+=" loop "),1==parseInt(this.controls.video.controls.getVal(),10)&&(e+=" controls "),t+="<video "+e+' id="'+this.controls.general.id.getVal()+'" style="'+this.controls.general.css.getVal()+'" class="'+this.controls.general.classes.getVal()+'"><source src="'+this.controls.video.mp4_url.getVal()+'" type="video/mp4"><source src="'+this.controls.video.webm_url.getVal()+'" type="video/webm"><source src="'+this.controls.video.ogv_url.getVal()+'" type="video/ogv"></video>',1==parseInt(this.controls.video.video_is_a_link.getVal(),10)&&(t+="</a>"),t},render:function(t){var e="";1==parseInt(t.video.video_is_a_link,10)&&(e+='<a href="'+t.video.link_to+'">');var i="";return 1==parseInt(t.video.autoplay,10)&&(i+=" autoplay "),1==parseInt(t.video.loop,10)&&(i+=" loop "),1==parseInt(t.video.controls,10)&&(i+=" controls "),e+="<video "+i+' id="'+t.general.id+'" style="'+t.general.css+'" class="'+t.general.classes+'"><source src="'+t.video.mp4_url+'" type="video/mp4"><source src="'+t.video.webm_url+'" type="video/webm"><source src="'+t.video.ogv_url+'" type="video/ogv"></video>',1==parseInt(t.video.video_is_a_link,10)&&(e+="</a>"),e}};t.squaresRegisterElement&&t.squaresRegisterElement(r),t.squaresRendererRegisterElement(r);var l={name:"YouTube",iconClass:"fa fa-youtube",useStyleControls:!1,useFontControls:!1,controls:{youtube:{embed_code:{name:"Embed Code",type:"textarea",default:'<iframe width="560" height="315" src="https://www.youtube.com/embed/6NC_ODHu5jg" frameborder="0" allowfullscreen></iframe>'},allow_fullscreen:{name:"Allow Fullscreen",type:"switch",default:1},iframe_width:{name:"iframe Width",type:"int",default:320},iframe_auto_width:{name:"iframe Auto Width",type:"switch",default:1},iframe_height:{name:"iframe Height",type:"int",default:320}}},controlGroupIcons:{youtube:"fa fa-youtube"},content:function(){var t=this.controls.youtube.embed_code.getVal(),e="";return e+='<div id="'+this.controls.general.id.getVal()+'" style="'+this.controls.general.css.getVal()+'" class="'+this.controls.general.classes.getVal()+'">',t=t.replace("allowfullscreen",""),1==parseInt(this.controls.youtube.allow_fullscreen.getVal(),10)&&-1==t.indexOf("allowfullscreen")&&(t=t.replace("></iframe>"," allowfullscreen></iframe>")),(e+=t=(t=1==parseInt(this.controls.youtube.iframe_auto_width.getVal(),10)?t.replace(/width="\d+"/g,'width="100%"'):t.replace(/width="\d+"/g,'width="'+this.controls.youtube.iframe_width.getVal()+'px"')).replace(/height="\d+"/g,'height="'+this.controls.youtube.iframe_height.getVal()+'px"'))+"</div>"},render:function(t){var e=t.youtube.embed_code,i="";return i+='<div id="'+t.general.id+'" style="'+t.general.css+'" class="'+t.general.classes+'">',e=e.replace("allowfullscreen",""),1==parseInt(t.youtube.allow_fullscreen,10)&&-1==e.indexOf("allowfullscreen")&&(e=e.replace("></iframe>"," allowfullscreen></iframe>")),(i+=e=(e=1==parseInt(t.youtube.iframe_auto_width,10)?e.replace(/width="\d+"/g,'width="100%"'):e.replace(/width="\d+"/g,'width="'+t.youtube.iframe_width+'px"')).replace(/height="\d+"/g,'height="'+t.youtube.iframe_height+'px"'))+"</div>"}};t.squaresRegisterElement&&t.squaresRegisterElement(l),t.squaresRendererRegisterElement(l);var h={name:"Button",iconClass:"fa fa-link",controls:{button:{text:{name:"Text",type:"text",default:"Button"},link_to:{name:"Link to",type:"text",default:"#"},new_tab:{name:"Open in New Tab",type:"switch",default:0},display:{name:"Display",type:"button group",options:["inline-block","block"],default:"inline-block"},height:{name:"Height",type:"int",default:44},bg_color:{name:"Background Color",type:"color",default:"#2196f3"},text_color:{name:"Text Color",type:"color",default:"#ffffff"},border_radius:{name:"Border Radius",type:"int",default:10},padding:{name:"Padding Left/Right",type:"int",default:20}}},controlGroupIcons:{button:"fa fa-link"},content:function(){var t="";t+="display: "+this.controls.button.display.getVal()+"; ",t+="height: "+this.controls.button.height.getVal()+"px; ",t+="line-height: "+this.controls.button.height.getVal()+"px; ",t+="background-color: "+this.controls.button.bg_color.getVal()+"; ",t+="color: "+this.controls.button.text_color.getVal()+"; ",t+="border-radius: "+this.controls.button.border_radius.getVal()+"px; ",t+="padding-left: "+this.controls.button.padding.getVal()+"px; ",t+="padding-right: "+this.controls.button.padding.getVal()+"px; ";var e="";return 1==parseInt(this.controls.button.new_tab.getVal(),10)&&(e='target="_blank"'),'<div id="'+this.controls.general.id.getVal()+'" style="'+this.controls.general.css.getVal()+'" class="'+this.controls.general.classes.getVal()+'"><a href="'+this.controls.button.link_to.getVal()+'" style="'+t+'" '+e+' class="squares-button">'+this.controls.button.text.getVal()+"</a></div>"},render:function(t){var e="";e+="display: "+t.button.display+"; ",e+="height: "+t.button.height+"px; ",e+="line-height: "+t.button.height+"px; ",e+="background-color: "+t.button.bg_color+"; ",e+="color: "+t.button.text_color+"; ",e+="border-radius: "+t.button.border_radius+"px; ",e+="padding-left: "+t.button.padding+"px; ",e+="padding-right: "+t.button.padding+"px; ";var i="";return 1==parseInt(t.button.new_tab,10)&&(i='target="_blank"'),'<div id="'+t.general.id+'" style="'+t.general.css+'" class="'+t.general.classes+'"><a href="'+t.button.link_to+'" style="'+e+'" '+i+' class="squares-button">'+t.button.text+"</a></div>"}};t.squaresRegisterElement&&t.squaresRegisterElement(h),t.squaresRendererRegisterElement(h)}(jQuery,window,document),function($,window,document,undefined){"use strict";var fullscreenMap=undefined,fullscreenMapParent=undefined;$.imageMapProInitialized=function(t){},$.imageMapProEventHighlightedShape=function(t,e){},$.imageMapProEventUnhighlightedShape=function(t,e){},$.imageMapProEventClickedShape=function(t,e){},$.imageMapProEventOpenedTooltip=function(t,e){},$.imageMapProEventClosedTooltip=function(t,e){},$.imageMapProHighlightShape=function(t,e){var i=$('[data-shape-title="'+e+'"]').data("index"),s=instances[t].settings.spots[i];if(-1==instances[t].apiHighlightedShapes.indexOf(i)&&instances[t].apiHighlightedShapes.push(i),instances[t].connectedShapes[s.id])for(var o=0;o<instances[t].connectedShapes[s.id].length;o++){var n=instances[t].connectedShapes[s.id][o].index;-1==instances[t].apiHighlightedShapes.indexOf(n)&&instances[t].apiHighlightedShapes.push(n)}instances[t].highlightShape(i,!0)},$.imageMapProUnhighlightShape=function(t,e){var i=$('[data-shape-title="'+e+'"]').data("index"),s=instances[t].settings.spots[i];if(-1!=instances[t].apiHighlightedShapes.indexOf(i)){var o=instances[t].apiHighlightedShapes.indexOf(i);instances[t].apiHighlightedShapes.splice(o,1)}if(instances[t].connectedShapes[s.id])for(var n=0;n<instances[t].connectedShapes[s.id].length;n++){var a=instances[t].connectedShapes[s.id][n].index,r=instances[t].apiHighlightedShapes.indexOf(a);instances[t].apiHighlightedShapes.splice(r,1),instances[t].unhighlightShape(a)}instances[t].unhighlightShape(i)},$.imageMapProOpenTooltip=function(t,e){var i=$('[data-shape-title="'+e+'"]').data("index");instances[t].showTooltip(i),instances[t].updateTooltipPosition(i),-1==instances[t].apiOpenedTooltips.indexOf(i)&&instances[t].apiOpenedTooltips.push(i)},$.imageMapProHideTooltip=function(t,e){var i=$('[data-shape-title="'+e+'"]').data("index");if(-1!=instances[t].apiOpenedTooltips.indexOf(i)){var s=instances[t].apiOpenedTooltips.indexOf(i);instances[t].apiOpenedTooltips.splice(s,1)}instances[t].hideTooltip(i)},$.imageMapProReInitMap=function(t){instances[t].init()},$.imageMapProIsMobile=function(){return isMobile()};var pluginName="imageMapPro",default_settings=$.imageMapProEditorDefaults,default_spot_settings=$.imageMapProShapeDefaults,instances=new Array;function Plugin(t,e){this.element=t,this.settings=$.extend(!0,{},default_settings,e),this.root=$(t),this.wrap=undefined,this.zoomWrap=undefined,this.translateWrap=undefined,this.ui=undefined,this.uiNavigatorRoot=undefined,this.uiNavigatorWindow=undefined,this.uiNavigatorBackground=undefined,this.shapeContainer=undefined,this.shapeSvgContainer=undefined,this.fullscreenTooltipsContainer=undefined,this.visibleFullscreenTooltip=undefined,this.visibleFullscreenTooltipIndex=undefined,this.bodyOverflow=undefined,this.highlightedShapes=new Array,this.connectedShapes=new Array,this.openedTooltips=new Array,this.apiHighlightedShapes=new Array,this.apiOpenedTooltips=new Array,this.targetZoom=1,this.zoom=1,this.maxZoomLevel=8,this.zoomMultiplier=1.45,this.targetPanX=0,this.actualPanX=0,this.targetPanY=0,this.actualPanY=0,this.initialPanX=0,this.initialPanY=0,this.panDeltaY=0,this.ix=0,this.iy=0,this.lastX=0,this.lastY=0,this.pinchInitial=[{x:0,y:0},{x:0,y:0}],this.pinchInitialDistance=0,this.pinchInitialZoom=0,this.navigatorRatio=1,this.navigatorMarginX=0,this.navigatorMarginY=0,this.touch=!1,this.fullscreenTooltipVisible=!1,this.panning=!1,this.didPan=!1,this.panningOnNavigator=!1,this.pinching=!1,this.init()}function hexToRgb(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function screenToImageMapSpace(t,e,i){return{x:Math.round(1e3*(t-i.offset().left))/1e3,y:Math.round(1e3*(e-i.offset().top))/1e3}}function isPointInsideRect(t,e,i,s,o,n){return i<=t&&t<=i+o&&s<=e&&e<=s+n}function isPointInsidePolygon(t,e,i){for(var s=!1,o=0,n=i.length-1;o<i.length;n=o++){var a=i[o][0],r=i[o][1],l=i[n][0],h=i[n][1];e<r!=e<h&&t<(l-a)*(e-r)/(h-r)+a&&(s=!s)}return s}function isPointInsideEllipse(t,e,i,s,o,n){return(t-i)*(t-i)/(o*o)+(e-s)*(e-s)/(n*n)<=1}function fitRectToScreen(t,e,i,s){return t<0&&(t=0),e<0&&(e=0),t>$(document).width()-i&&(t=$(document).width()-i),e>$(document).height()-s&&(e=$(document).height()-s),{x:t,y:e}}function shuffle(t){for(var e,i,s=t.length;0!==s;)i=Math.floor(Math.random()*s),e=t[s-=1],t[s]=t[i],t[i]=e;return t}function isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function lerp(t,e,i){return t*(1-i)+e*i}$.extend(Plugin.prototype,{init:function(){var e=this;e.parseSettings(),(instances[this.settings.general.name]=this).id=100*Math.random();for(var t=0;t<e.settings.spots.length;t++){var i=e.settings.spots[t],s=$.extend(!0,{},default_spot_settings);i=$.extend(!0,s,i),e.settings.spots[t]=$.extend(!0,{},i),e.settings.spots[t].title&&0!=e.settings.spots[t].title.length||(e.settings.spots[t].title=e.settings.spots[t].id),""!=i.connected_to&&(this.connectedShapes[i.connected_to]||(this.connectedShapes[i.connected_to]=new Array),this.connectedShapes[i.connected_to].push({id:i.id,index:t}))}var o=new Image;o.src=e.settings.image.url,e.loadImage(o,function(){},function(){var t="";t+='<div class="imp-wrap">',t+='   <div class="imp-ui" data-image-map-pro-ui-id="'+e.settings.id+'">',1==parseInt(e.settings.zooming.enable_zooming,10)&&1==parseInt(e.settings.zooming.enable_navigator,10)&&(t+='       <div class="imp-ui-navigator-root">',t+='         <div class="imp-ui-navigator-background"></div>',t+='         <div class="imp-ui-navigator-window"></div>',t+='         <img src="'+e.settings.image.url+'">',t+="      </div>"),1==parseInt(e.settings.zooming.enable_zooming,10)&&1==parseInt(e.settings.zooming.enable_zoom_buttons,10)&&(t+='       <div class="imp-ui-zoom-button imp-ui-zoom-button-zoom-in" style="color: '+e.settings.zooming.zoom_button_text_color+"; background: "+e.settings.zooming.zoom_button_background_color+';"><i class="fa fa-plus"></i></div>',t+='       <div class="imp-ui-zoom-button imp-ui-zoom-button-zoom-out" style="color: '+e.settings.zooming.zoom_button_text_color+"; background: "+e.settings.zooming.zoom_button_background_color+';"><i class="fa fa-minus"></i></div>'),t+="   </div>",t+='   <div class="imp-zoom-outer-wrap">',t+='       <div class="imp-translate-wrap">',t+='           <div class="imp-zoom-wrap">',t+='               <img src="'+e.settings.image.url+'" class="imp-main-image">',t+="           </div>",t+="       </div>",t+="   </div>",t+="</div>",e.root.html(t),e.wrap=e.root.find(".imp-wrap"),e.zoomWrap=e.root.find(".imp-zoom-wrap"),e.translateWrap=e.root.find(".imp-translate-wrap"),e.ui=e.wrap.find(".imp-ui"),e.root.addClass("imp-initialized"),e.root.attr("data-image-map-pro-id",e.settings.id),e.centerImageMap(),e.drawShapes(),e.addTooltips(),e.initFullscreen(),e.initZoom(),e.adjustSize(),e.initNavigator(),e.events(),e.APIEvents(),e.animateShapesLoop(),$.imageMapProInitialized(e.settings.general.name)}),$(window).off("resize."+this.settings.general.id+this.settings.runtime.is_fullscreen),$(window).on("resize."+this.settings.general.id+this.settings.runtime.is_fullscreen,function(){0<e.openedTooltips.length&&e.updateTooltipPosition(e.openedTooltips[e.openedTooltips.length-1]),e.resetZoomAndPan(),fullscreenMap&&fullscreenMap.adjustSize(),e.adjustNavigatorSize()})},parseSettings:function(){this.settings.general.image_url&&(this.settings.image.url=this.settings.general.image_url)},loadImage:function(t,e,i){t.complete&&t.naturalWidth!==undefined&&t.naturalHeight!==undefined?i():(e(),$(t).on("load",function(){$(t).off("load"),i()}))},centerImageMap:function(){1==parseInt(this.settings.general.center_image_map,10)&&this.wrap.css({margin:"0 auto"})},adjustSize:function(){var t=this;if(1==parseInt(t.settings.runtime.is_fullscreen,10)){var e=$(window).width()/$(window).height(),i=t.settings.general.width/t.settings.general.height;return t.settings.general.height=i<e?(t.settings.general.width=$(window).height()*i,$(window).height()):(t.settings.general.width=$(window).width(),$(window).width()/i),void t.wrap.css({width:t.settings.general.width,height:t.settings.general.height})}1==parseInt(t.settings.general.responsive,10)?1==parseInt(t.settings.general.preserve_quality,10)&&(t.settings.general.naturalWidth||t.settings.general.width,t.wrap.css({"max-width":t.settings.general.naturalWidth})):t.wrap.css({width:t.settings.general.width,height:t.settings.general.height})},drawShapes:function(){for(var t=this,e=0;e<t.settings.spots.length;e++)if((r=t.settings.spots[e]).x=parseFloat(r.x),r.y=parseFloat(r.y),r.width=parseFloat(r.width),r.height=parseFloat(r.height),r.default_style.stroke_width=parseInt(r.default_style.stroke_width),r.mouseover_style.stroke_width=parseInt(r.mouseover_style.stroke_width),"poly"==r.type)for(var i=0;i<r.points.length;i++)r.points[i].x=parseFloat(r.points[i].x),r.points[i].y=parseFloat(r.points[i].y);t.settings.general.width=parseInt(t.settings.general.width),t.settings.general.height=parseInt(t.settings.general.height),t.zoomWrap.prepend('<div class="imp-shape-container"></div>'),t.shapeContainer=t.wrap.find(".imp-shape-container");var s="",o=t.settings.general.width,n=t.settings.general.height;1==parseInt(t.settings.general.responsive,10)&&(o=t.settings.general.naturalWidth,n=t.settings.general.naturalHeight);var a='<svg class="hs-poly-svg" viewBox="0 0 '+o+" "+n+'" preserveAspectRatio="none">';for(e=0;e<t.settings.spots.length;e++){var r=t.settings.spots[e],l=this.calcStyles(r.default_style,e);if("spot"==r.type)if(1==parseInt(r.default_style.use_icon,10)){var h="imp-shape-spot";if(1==parseInt(r.default_style.icon_is_pin,10)&&(h+=" imp-shape-spot-pin"),s+='<div class="imp-shape '+h+'" id="'+r.id+'" data-shape-title="'+r.title+'" style="'+l+'" data-index='+e+">","library"==r.default_style.icon_type){var p="color: "+r.default_style.icon_fill+";";p+="line-height: "+r.height+"px;",s+='   <div class="imp-spot-fontawesome-icon" style="'+(p+="font-size: "+r.height+"px;")+'">',s+='       <i class="fa fa-'+r.default_style.icon_fontawesome_id+'"></i>',s+="   </div>"}if("custom"==r.default_style.icon_type&&0<r.default_style.icon_url.length&&(s+='<img src="'+r.default_style.icon_url+'" style="width: '+r.width+"px; height: "+r.height+'px">'),1==parseInt(r.default_style.icon_shadow,10)){var g="";g+="width: "+r.width+"px;",g+="height: "+r.height+"px;",s+='<div style="'+(g+="top: "+r.height/2+"px;")+'" class="imp-shape-icon-shadow"></div>'}s+="</div>"}else s+='<div class="imp-shape imp-shape-spot" id="'+r.id+'" data-shape-title="'+r.title+'" style="'+l+'" data-index='+e+"></div>";if("text"==r.type&&(s+='<div class="imp-shape imp-shape-text" id="'+r.id+'" data-shape-title="'+r.title+'" style="'+l+'" data-index='+e+">"+r.text.text+"</div>"),"rect"==r.type&&(s+='<div class="imp-shape imp-shape-rect" id="'+r.id+'" data-shape-title="'+r.title+'" style="'+l+'" data-index='+e+"></div>"),"oval"==r.type&&(s+='<div class="imp-shape imp-shape-oval" id="'+r.id+'" data-shape-title="'+r.title+'" style="'+l+'" data-index='+e+"></div>"),"poly"==r.type){a+='<polygon class="imp-shape imp-shape-poly" style="'+l+'" data-index='+e+' id="'+r.id+'" data-shape-title="'+r.title+'" points="';var d=o*(r.width/100),c=n*(r.height/100);for(r.vs=new Array,i=0;i<r.points.length;i++){var u=o*(r.x/100)+r.points[i].x/100*d,m=n*(r.y/100)+r.points[i].y/100*c;a+=u+","+m+" ",r.vs.push([u,m])}a+='"></polygon>'}}a+="</svg>",t.shapeContainer.html(s+a)},addTooltips:function(){var t=this;if("always"==t.settings.tooltips.fullscreen_tooltips||"mobile-only"==t.settings.tooltips.fullscreen_tooltips&&isMobile()){t.fullscreenTooltipsContainer||($('.imp-fullscreen-tooltips-container[data-image-map-id="'+t.settings.id+'"]').remove(),$("body").prepend('<div class="imp-fullscreen-tooltips-container" data-image-map-id="'+t.settings.id+'"></div>'),t.fullscreenTooltipsContainer=$('.imp-fullscreen-tooltips-container[data-image-map-id="'+t.settings.id+'"]'));for(var e="",i=0;i<t.settings.spots.length;i++){var s="",o=hexToRgb((n=t.settings.spots[i]).tooltip_style.background_color)||{r:0,b:0,g:0};s+="padding: "+n.tooltip_style.padding+"px;",s+="background: rgba("+o.r+", "+o.g+", "+o.b+", "+n.tooltip_style.background_opacity+");","none"==t.settings.tooltips.tooltip_animation&&(s+="opacity: 0;"),"fade"==t.settings.tooltips.tooltip_animation&&(s+="opacity: 0;",s+="transition-property: opacity;-moz-transition-property: opacity;-webkit-transition-property: opacity;"),"grow"==t.settings.tooltips.tooltip_animation&&(s+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);",s+="transition-property: transform;-moz-transition-property: -moz-transform;-webkit-transition-property: -webkit-transform;",s+="transform-origin: 50% 50%;-moz-transform-origin: 50% 50%;-webkit-transform-origin: 50% 50%;"),e+='<div class="imp-fullscreen-tooltip" style="'+s+'" data-index="'+i+'">',e+='   <div class="imp-tooltip-close-button" data-index="'+i+'"><i class="fa fa-times" aria-hidden="true"></i></div>',"plain-text"==n.tooltip_content.content_type?(s="",e+='<div class="imp-tooltip-plain-text" style="'+(s+="color: "+n.tooltip_content.plain_text_color+";")+'">'+n.tooltip_content.plain_text+"</div>"):n.tooltip_content.squares_json?e+=$.squaresRendererRenderObject(n.tooltip_content.squares_json):e+=$.squaresRendererRenderObject(n.tooltip_content.squares_settings),e+="</div>"}t.fullscreenTooltipsContainer.html(e)}else{for(e="",i=0;i<t.settings.spots.length;i++){var n;s="",o=hexToRgb((n=t.settings.spots[i]).tooltip_style.background_color)||{r:0,b:0,g:0},s+="border-radius: "+n.tooltip_style.border_radius+"px;",s+="padding: "+n.tooltip_style.padding+"px;",s+="background: rgba("+o.r+", "+o.g+", "+o.b+", "+n.tooltip_style.background_opacity+");","none"==t.settings.tooltips.tooltip_animation&&(s+="opacity: 0;"),"fade"==t.settings.tooltips.tooltip_animation&&(s+="opacity: 0;",s+="transition-property: opacity;-moz-transition-property: opacity;-webkit-transition-property: opacity;"),"grow"==t.settings.tooltips.tooltip_animation&&(s+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);",s+="transition-property: transform;-moz-transition-property: -moz-transform;-webkit-transition-property: -webkit-transform;","top"==n.tooltip_style.position&&(s+="transform-origin: 50% 100%;-moz-transform-origin: 50% 100%;-webkit-transform-origin: 50% 100%;"),"bottom"==n.tooltip_style.position&&(s+="transform-origin: 50% 0%;-moz-transform-origin: 50% 0%;-webkit-transform-origin: 50% 0%;"),"left"==n.tooltip_style.position&&(s+="transform-origin: 100% 50%;-moz-transform-origin: 100% 50%;-webkit-transform-origin: 100% 50%;"),"right"==n.tooltip_style.position&&(s+="transform-origin: 0% 50%;-moz-transform-origin: 0% 50%;-webkit-transform-origin: 0% 50%;")),e+='<div class="imp-tooltip" style="'+s+'" data-index="'+i+'">',"top"==n.tooltip_style.position&&(e+='   <div class="hs-arrow hs-arrow-bottom" style="border-top-color: rgba('+o.r+", "+o.g+", "+o.b+", "+n.tooltip_style.background_opacity+');"></div>'),"bottom"==n.tooltip_style.position&&(e+='   <div class="hs-arrow hs-arrow-top" style="border-bottom-color: rgba('+o.r+", "+o.g+", "+o.b+", "+n.tooltip_style.background_opacity+');"></div>'),"left"==n.tooltip_style.position&&(e+='   <div class="hs-arrow hs-arrow-right" style="border-left-color: rgba('+o.r+", "+o.g+", "+o.b+", "+n.tooltip_style.background_opacity+');"></div>'),"right"==n.tooltip_style.position&&(e+='   <div class="hs-arrow hs-arrow-left" style="border-right-color: rgba('+o.r+", "+o.g+", "+o.b+", "+n.tooltip_style.background_opacity+');"></div>'),"plain-text"==n.tooltip_content.content_type?(s="",e+='<div class="imp-tooltip-plain-text" style="'+(s+="color: "+n.tooltip_content.plain_text_color+";")+'">'+n.tooltip_content.plain_text+"</div>"):n.tooltip_content.squares_json?e+=$.squaresRendererRenderObject(n.tooltip_content.squares_json):e+=$.squaresRendererRenderObject(n.tooltip_content.squares_settings),e+="</div>"}t.wrap.prepend(e)}},initFullscreen:function(){if(1==parseInt(this.settings.fullscreen.enable_fullscreen_mode,10)){var t="";t+="background: "+this.settings.fullscreen.fullscreen_button_color+"; ",t+="color: "+this.settings.fullscreen.fullscreen_button_text_color+"; ";var e='<i class="fa fa-arrows-alt" aria-hidden="true"></i>';1==parseInt(this.settings.runtime.is_fullscreen,10)&&(e='<i class="fa fa-times" aria-hidden="true"></i>');var i="Go Fullscreen";1==parseInt(this.settings.runtime.is_fullscreen,10)&&(i="Close Fullscreen");var s="";"icon"==this.settings.fullscreen.fullscreen_button_type&&(s+=e),"text"==this.settings.fullscreen.fullscreen_button_type&&(s+=i),"icon_and_text"==this.settings.fullscreen.fullscreen_button_type&&(s+=e+" "+i);var o="";"icon"==this.settings.fullscreen.fullscreen_button_type&&(o+="imp-fullscreen-button-icon-only");var n="";n+='<div style="'+t+'" class="'+o+" imp-fullscreen-button imp-fullscreen-button-position-"+this.settings.fullscreen.fullscreen_button_position+'">',n+=s,n+="</div>",this.ui.append(n),1==parseInt(this.settings.runtime.is_fullscreen,10)&&($(window).scrollTop(0),fullscreenMap=this);var a=this.ui.find(".imp-fullscreen-button");1!=parseInt(this.settings.fullscreen.fullscreen_button_position,10)&&4!=parseInt(this.settings.fullscreen.fullscreen_button_position,10)||a.css({"margin-left":-a.outerWidth()/2}),1==parseInt(this.settings.fullscreen.start_in_fullscreen_mode,10)&&0==this.settings.runtime.is_fullscreen&&this.toggleFullscreen()}},initNavigator:function(){1==parseInt(this.settings.zooming.enable_zooming,10)&&1==parseInt(this.settings.zooming.enable_navigator,10)&&(this.uiNavigatorRoot=this.ui.find(".imp-ui-navigator-root"),this.uiNavigatorWindow=this.ui.find(".imp-ui-navigator-window"),this.uiNavigatorBackground=this.ui.find(".imp-ui-navigator-background"),this.adjustNavigatorSize())},initZoomButtons:function(){},initZoom:function(){1==parseInt(this.settings.zooming.enable_zooming,10)&&(1==parseInt(this.settings.zooming.limit_max_zoom_to_image_size,10)?this.maxZoomLevel=this.settings.general.naturalWidth/this.wrap.width():this.maxZoomLevel=this.settings.zooming.max_zoom)},adjustNavigatorSize:function(){if(0!=parseInt(this.settings.zooming.enable_zooming,10)&&0!=parseInt(this.settings.zooming.enable_navigator,10))if(1==parseInt(this.settings.runtime.is_fullscreen,10)){this.navigatorRatio=this.uiNavigatorRoot.width()/this.settings.general.width;var t=this.settings.general.naturalWidth/this.settings.general.naturalHeight,e=window.innerWidth/window.innerHeight,i=0,s=0,o=0,n=0;this.navigatorMarginY=t<e?(this.navigatorMarginX=(s=(i=t<1?(o=150*t,(n=150)*e):(n=(o=150)/t)*e,n),o/2-i/2),0):(this.navigatorMarginX=(s=(i=o=t<1?(n=150)*t:(n=150/t,150),o/e),0),n/2-s/2),this.uiNavigatorWindow.css({width:i,height:s,transform:"translate("+this.navigatorMarginX+"px, "+this.navigatorMarginY+"px)"}),this.uiNavigatorBackground.css({left:-(i-o)/2,top:-(s-n)/2,width:i,height:s})}else this.navigatorRatio=this.uiNavigatorRoot.width()/this.wrap.width()},measureTooltipSize:function(t){if(!("always"==this.settings.tooltips.fullscreen_tooltips||"mobile"==this.settings.tooltips.fullscreen_tooltips&&isMobile())){var e=this.settings.spots[t],i=this.wrap.find('.imp-tooltip[data-index="'+t+'"]');0==parseInt(e.tooltip_style.auto_width,10)&&i.css({width:e.tooltip_style.width}),i.data("imp-measured-width",i.outerWidth()),i.data("imp-measured-height",i.outerHeight())}},animateShapesLoop:function(){if("none"!=this.settings.general.pageload_animation)for(var t=750/this.settings.spots.length,e=shuffle(this.settings.spots.slice()),i=0;i<e.length;i++)this.animateShape(e[i],t*i)},animateShape:function(t,e){var i=this,s=$("#"+t.id);setTimeout(function(){"fade"==i.settings.general.pageload_animation&&s.css({opacity:t.default_style.opacity}),"grow"==i.settings.general.pageload_animation&&s.css({transform:"scale(1, 1)","-moz-transform":"scale(1, 1)","-webkit-transform":"scale(1, 1)"})},e)},events:function(){var i=this;this.wrap.off("mousedown"),this.wrap.on("mousedown",function(t){i.touch||i.handleEventStart(t)}),this.wrap.off("mousemove"),this.wrap.on("mousemove",function(t){i.touch||i.handleEventMove(t)}),this.wrap.off("mouseup"),this.wrap.on("mouseup",function(t){i.touch||i.handleEventEnd(t)}),this.wrap.off("mousewheel"),this.wrap.on("mousewheel",function(t){if(!i.touch)return i.handleEventEnd(t),(1!=parseInt(i.settings.zooming.enable_zooming,10)||!(t.deltaY<0&&1<i.targetZoom||0<t.deltaY&&i.targetZoom<i.maxZoomLevel))&&void 0}),this.wrap.off("touchstart"),this.wrap.on("touchstart",function(t){return i.touch=!0,i.handleEventStart(t),!(0<$(t.target).closest(".imp-ui").length)&&!i.pinching&&void 0}),this.wrap.off("touchmove"),this.wrap.on("touchmove",function(t){return i.handleEventMove(t),(!i.panning||0==i.panDeltaY)&&!i.pinching&&void 0}),this.wrap.off("touchend"),this.wrap.on("touchend",function(t){i.handleEventEnd(t)}),$(document).off("mousemove."+this.settings.id),$(document).on("mousemove."+this.settings.id,function(t){if(!i.touch&&(0!=$(t.target).closest(".imp-wrap").length&&0!=$(t.target).closest('[data-image-map-pro-id="'+i.settings.id+'"]').length||0!=$(t.target).closest(".imp-fullscreen-tooltips-container").length||("mouseover"==i.settings.tooltips.show_tooltips&&0==$(t.target).closest("[data-imp-open-tooltip-on-mouseover]").length&&0==$(t.target).closest("[data-imp-trigger-shape-on-mouseover]").length&&i.hideAllTooltips(),0==$(t.target).closest("[data-imp-highlight-shape-on-mouseover]").length&&0==$(t.target).closest("[data-imp-trigger-shape-on-mouseover]").length&&i.unhighlightAllShapes()),i.panning)){var e=i.getEventCoordinates(t);i.pan(e.x,e.y)}}),$(document).off("touchstart."+this.settings.id),$(document).on("touchstart."+this.settings.id,function(t){0!=$(t.target).closest(".imp-wrap").length&&0!=$(t.target).closest('[data-image-map-pro-id="'+i.settings.id+'"]').length||0!=$(t.target).closest(".imp-fullscreen-tooltips-container").length||("mouseover"==i.settings.tooltips.show_tooltips&&0==$(t.target).closest("[data-imp-open-tooltip-on-mouseover]").length&&0==$(t.target).closest("[data-imp-trigger-shape-on-mouseover]").length&&i.hideAllTooltips(),0==$(t.target).closest("[data-imp-highlight-shape-on-mouseover]").length&&0==$(t.target).closest("[data-imp-trigger-shape-on-mouseover]").length&&i.unhighlightAllShapes())}),$(document).off("mouseup."+this.settings.id),$(document).on("mouseup."+this.settings.id,function(t){i.touch||(0!=$(t.target).closest(".imp-wrap").length&&0!=$(t.target).closest('[data-image-map-pro-id="'+i.settings.id+'"]').length||0!=$(t.target).closest(".imp-fullscreen-tooltips-container").length||("click"==i.settings.tooltips.show_tooltips&&i.hideAllTooltips(),i.unhighlightAllShapes()),i.panning&&(i.panning=!1))}),$(document).off("touchend."+this.settings.id),$(document).on("touchend."+this.settings.id,function(t){0!=$(t.target).closest(".imp-wrap").length&&0!=$(t.target).closest('[data-image-map-pro-id="'+i.settings.id+'"]').length||0!=$(t.target).closest(".imp-fullscreen-tooltips-container").length||("click"==i.settings.tooltips.show_tooltips&&i.hideAllTooltips(),i.unhighlightAllShapes())}),$(document).off("click."+this.settings.id,".imp-tooltip-close-button"),$(document).on("click."+this.settings.id,".imp-tooltip-close-button",function(){i.hideAllTooltips()})},APIEvents:function(){var l=this;$(document).on("mouseover","[data-imp-highlight-shape-on-mouseover]",function(){var t=$(this).data("imp-highlight-shape-on-mouseover"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index");l.highlightShape(i,!0)}}),$(document).on("mouseout","[data-imp-highlight-shape-on-mouseover]",function(){$(this).data("imp-highlight-shape-on-mouseover");var t=$(this).data("imp-image-map-name");t||(t=l.settings.general.name),t==l.settings.general.name&&l.unhighlightAllShapes()}),$(document).on("click","[data-imp-highlight-shape-on-click]",function(){var t=$(this).data("imp-highlight-shape-on-click"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index"),s=l.settings.spots[i];if(l.highlightShape(i,!0),-1==instances[e].apiHighlightedShapes.indexOf(i)&&instances[e].apiHighlightedShapes.push(i),instances[e].connectedShapes[s.id])for(var o=0;o<instances[e].connectedShapes[s.id].length;o++){var n=instances[e].connectedShapes[s.id][o].index;-1==instances[e].apiHighlightedShapes.indexOf(n)&&instances[e].apiHighlightedShapes.push(n)}}}),$(document).on("mouseover","[data-imp-unhighlight-shape-on-mouseover]",function(){var t=$(this).data("imp-unhighlight-shape-on-mouseover"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index"),s=l.settings.spots[i];if(-1!=instances[e].apiHighlightedShapes.indexOf(i)){var o=instances[e].apiHighlightedShapes.indexOf(i);instances[e].apiHighlightedShapes.splice(o,1)}if(instances[e].connectedShapes[s.id])for(var n=0;n<instances[e].connectedShapes[s.id].length;n++){var a=instances[e].connectedShapes[s.id][n].index,r=instances[e].apiHighlightedShapes.indexOf(a);instances[e].apiHighlightedShapes.splice(r,1),instances[e].unhighlightShape(a)}l.unhighlightShape(i)}}),$(document).on("click","[data-imp-unhighlight-shape-on-click]",function(){var t=$(this).data("imp-unhighlight-shape-on-click"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index"),s=l.settings.spots[i];if(-1!=instances[e].apiHighlightedShapes.indexOf(i)){var o=instances[e].apiHighlightedShapes.indexOf(i);instances[e].apiHighlightedShapes.splice(o,1)}if(instances[e].connectedShapes[s.id])for(var n=0;n<instances[e].connectedShapes[s.id].length;n++){var a=instances[e].connectedShapes[s.id][n].index,r=instances[e].apiHighlightedShapes.indexOf(a);instances[e].apiHighlightedShapes.splice(r,1),instances[e].unhighlightShape(a)}l.unhighlightShape(i)}}),$(document).on("mouseover","[data-imp-open-tooltip-on-mouseover]",function(){var t=$(this).data("imp-open-tooltip-on-mouseover"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index");l.showTooltip(i),l.updateTooltipPosition(i)}}),$(document).on("mouseout","[data-imp-open-tooltip-on-mouseover]",function(){$(this).data("imp-open-tooltip-on-mouseover");var t=$(this).data("imp-image-map-name");t||(t=l.settings.general.name),t==l.settings.general.name&&l.hideAllTooltips()}),$(document).on("click","[data-imp-open-tooltip-on-click]",function(){var t=$(this).data("imp-open-tooltip-on-click"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index");l.showTooltip(i),l.updateTooltipPosition(i),-1==instances[e].apiOpenedTooltips.indexOf(i)&&instances[e].apiOpenedTooltips.push(i)}}),$(document).on("mouseover","[data-imp-close-tooltip-on-mouseover]",function(){var t=$(this).data("imp-close-tooltip-on-mouseover"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index");if(-1!=instances[e].apiOpenedTooltips.indexOf(i)){var s=instances[e].apiOpenedTooltips.indexOf(i);instances[e].apiOpenedTooltips.splice(s,1)}l.hideTooltip(i)}}),$(document).on("click","[data-imp-close-tooltip-on-click]",function(){var t=$(this).data("imp-close-tooltip-on-click"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index");if(-1!=instances[e].apiOpenedTooltips.indexOf(i)){var s=instances[e].apiOpenedTooltips.indexOf(i);instances[e].apiOpenedTooltips.splice(s,1)}l.hideTooltip(i)}}),$(document).on("mouseover","[data-imp-trigger-shape-on-mouseover]",function(){var t=$(this).data("imp-trigger-shape-on-mouseover"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index");l.highlightShape(i,!0),l.showTooltip(i),l.updateTooltipPosition(i)}}),$(document).on("mouseout","[data-imp-trigger-shape-on-mouseover]",function(){$(this).data("imp-trigger-shape-on-mouseover");var t=$(this).data("imp-image-map-name");t||(t=l.settings.general.name),t==l.settings.general.name&&(l.unhighlightAllShapes(),l.hideAllTooltips())}),$(document).on("click","[data-imp-trigger-shape-on-click]",function(){var t=$(this).data("imp-trigger-shape-on-click"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index"),s=l.settings.spots[i];if(l.highlightShape(i,!0),l.showTooltip(i),l.updateTooltipPosition(i),-1==instances[e].apiOpenedTooltips.indexOf(i)&&instances[e].apiOpenedTooltips.push(i),-1==instances[e].apiHighlightedShapes.indexOf(i)&&instances[e].apiHighlightedShapes.push(i),instances[e].connectedShapes[s.id])for(var o=0;o<instances[e].connectedShapes[s.id].length;o++){var n=instances[e].connectedShapes[s.id][o].index;-1==instances[e].apiHighlightedShapes.indexOf(n)&&instances[e].apiHighlightedShapes.push(n)}}}),$(document).on("mouseover","[data-imp-untrigger-shape-on-mouseover]",function(){var t=$(this).data("imp-untrigger-shape-on-mouseover"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index"),s=l.settings.spots[i];if(-1!=instances[e].apiHighlightedShapes.indexOf(i)){var o=instances[e].apiHighlightedShapes.indexOf(i);instances[e].apiHighlightedShapes.splice(o,1)}if(instances[e].connectedShapes[s.id])for(var n=0;n<instances[e].connectedShapes[s.id].length;n++){var a=instances[e].connectedShapes[s.id][n].index,r=instances[e].apiHighlightedShapes.indexOf(a);instances[e].apiHighlightedShapes.splice(r,1),instances[e].unhighlightShape(a)}l.unhighlightShape(i),-1!=instances[e].apiOpenedTooltips.indexOf(i)&&(o=instances[e].apiOpenedTooltips.indexOf(i),instances[e].apiOpenedTooltips.splice(o,1)),l.hideTooltip(i)}}),$(document).on("click","[data-imp-untrigger-shape-on-click]",function(){var t=$(this).data("imp-untrigger-shape-on-click"),e=$(this).data("imp-image-map-name");if(e||(e=l.settings.general.name),e==l.settings.general.name){var i=$('[data-shape-title="'+t+'"]').data("index"),s=l.settings.spots[i];if(-1!=instances[e].apiHighlightedShapes.indexOf(i)){var o=instances[e].apiHighlightedShapes.indexOf(i);instances[e].apiHighlightedShapes.splice(o,1)}if(instances[e].connectedShapes[s.id])for(var n=0;n<instances[e].connectedShapes[s.id].length;n++){var a=instances[e].connectedShapes[s.id][n].index,r=instances[e].apiHighlightedShapes.indexOf(a);instances[e].apiHighlightedShapes.splice(r,1),instances[e].unhighlightShape(a)}l.unhighlightShape(i),-1!=instances[e].apiOpenedTooltips.indexOf(i)&&(o=instances[e].apiOpenedTooltips.indexOf(i),instances[e].apiOpenedTooltips.splice(o,1)),l.hideTooltip(i)}})},disableEvents:function(){this.wrap.off("mousemove"),this.wrap.off("mouseup"),this.wrap.off("touchstart"),this.wrap.off("touchmove"),this.wrap.off("touchend"),$(document).off("mousemove."+this.settings.id),$(document).off("touchstart."+this.settings.id),$(document).off("click."+this.settings.id,".imp-tooltip-close-button"),$(document).off("click."+this.settings.id,".imp-fullscreen-button")},handleEventStart:function(t){var e=this.getEventCoordinates(t);if(1==parseInt(this.settings.zooming.enable_zooming,10)){if(0<$(t.target).closest(".imp-ui-navigator-root").length)return this.ix=e.x,this.iy=e.y,void(this.panningOnNavigator=!0);if(t.originalEvent.touches&&1<t.originalEvent.touches.length)return this.pinchInitial[0]={x:t.originalEvent.touches[0].pageX,y:t.originalEvent.touches[0].pageY},this.pinchInitial[1]={x:t.originalEvent.touches[1].pageX,y:t.originalEvent.touches[1].pageY},this.initialPanX=this.actualPanX,this.initialPanY=this.actualPanY,this.ix=(t.originalEvent.touches[0].pageX+t.originalEvent.touches[1].pageX)/2,this.iy=(t.originalEvent.touches[0].pageY+t.originalEvent.touches[1].pageY)/2,this.lastX=this.ix,this.lastY=this.iy,this.pinchInitialDistance=Math.sqrt(Math.pow(this.pinchInitial[1].x-this.pinchInitial[0].x,2)+Math.pow(this.pinchInitial[1].y-this.pinchInitial[0].y,2)),this.pinchInitialZoom=this.zoom,void(this.pinching=!0);this.panning||0!=$(t.target).closest(".imp-ui").length||(this.ix=e.x,this.iy=e.y,this.initialPanX=this.actualPanX,this.initialPanY=this.actualPanY,this.panning=!0)}},handleEventMove:function(t){if(!this.fullscreenTooltipVisible){var e=this.getEventRelativeCoordinates(t),i=this.matchShapeToCoords(e);if(1==parseInt(this.settings.zooming.enable_zooming,10)){if(this.panningOnNavigator){var s=((n=this.getEventCoordinates(t)).x-this.uiNavigatorRoot.offset().left)/this.navigatorRatio*this.targetZoom,o=(n.y-this.uiNavigatorRoot.offset().top)/this.navigatorRatio*this.targetZoom;return void this.panTo(s,o)}if(this.pinching)return this.pinch(t),void(this.didPan=!0);if(this.panning){var n=this.getEventCoordinates(t);return this.pan(n.x,n.y),void(this.didPan=!0)}}this.isPointInsideVisibleTooltip(t)&&0==parseInt(this.settings.tooltips.sticky_tooltips,10)||(-1!=i&&(this.didPan||(this.isShapeHighlighted(i)||(this.unhighlightAllShapes(),"mouseover"==this.settings.tooltips.show_tooltips&&this.hideAllTooltips(),this.highlightShape(i,!0)),"mouseover"==this.settings.tooltips.show_tooltips&&1==parseInt(this.settings.tooltips.enable_tooltips,10)&&1==parseInt(this.settings.spots[i].tooltip_style.enable_tooltip,10)&&this.showTooltip(i),0<this.openedTooltips.length&&1==parseInt(this.settings.tooltips.sticky_tooltips,10)&&"mouseover"==this.settings.tooltips.show_tooltips&&this.updateTooltipPosition(this.openedTooltips[this.openedTooltips.length-1],t))),-1==i&&(this.unhighlightAllShapes(),"mouseover"==this.settings.tooltips.show_tooltips&&this.hideAllTooltips()))}},handleEventEnd:function(t){if(1==parseInt(this.settings.zooming.enable_zooming,10)){if("mousewheel"==t.type)return 0<t.deltaY&&this.zoomIn(t),void(t.deltaY<0&&this.zoomOut(t));if(this.panningOnNavigator&&(this.panningOnNavigator=!1),0<$(t.target).closest(".imp-ui-navigator-root").length){var e=this.getEventCoordinates(t),i=(e.x-this.uiNavigatorRoot.offset().left)/this.navigatorRatio*this.targetZoom,s=(e.y-this.uiNavigatorRoot.offset().top)/this.navigatorRatio*this.targetZoom;return void this.panTo(i,s)}if(0<$(t.target).closest(".imp-ui-zoom-button").length)return void(0<$(t.target).closest(".imp-ui-zoom-button-zoom-in").length?this.zoomIn():this.zoomOut());this.panning&&(this.panning=!1),this.pinching&&(this.pinching=!1)}if(0<$(t.target).closest(".imp-fullscreen-button").length&&this.toggleFullscreen(),0==$(t.target).closest(".imp-tooltip").length&&!this.fullscreenTooltipVisible){var o=this.getEventRelativeCoordinates(t),n=this.matchShapeToCoords(o);-1!=n&&(this.didPan||(this.isShapeHighlighted(n)||(this.unhighlightAllShapes(),"mouseover"==this.settings.tooltips.show_tooltips&&this.hideAllTooltips(),this.highlightShape(n,!0)),1==parseInt(this.settings.tooltips.enable_tooltips,10)&&1==parseInt(this.settings.spots[n].tooltip_style.enable_tooltip,10)&&this.showTooltip(n),0<this.openedTooltips.length&&1==parseInt(this.settings.tooltips.sticky_tooltips,10)&&"mouseover"==this.settings.tooltips.show_tooltips&&this.updateTooltipPosition(this.openedTooltips[this.openedTooltips.length-1],t)),this.performClickAction(n)),-1==n&&(this.hideAllTooltips(),this.didPan||this.unhighlightAllShapes()),t.originalEvent.touches&&0==t.originalEvent.touches.length&&(this.didPan=!1),t.originalEvent.touches||(this.didPan=!1)}},getEventRelativeCoordinates:function(t){var e,i;if("touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"touchcancel"==t.type){var s=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e=s.pageX,i=s.pageY}else"mousedown"!=t.type&&"mouseup"!=t.type&&"mousemove"!=t.type&&"mouseover"!=t.type&&"mouseout"!=t.type&&"mouseenter"!=t.type&&"mouseleave"!=t.type||(e=t.pageX,i=t.pageY);return e-=this.zoomWrap.offset().left,i-=this.zoomWrap.offset().top,{x:e=e/(this.wrap.width()*this.zoom)*100,y:i=i/(this.wrap.height()*this.zoom)*100}},getEventCoordinates:function(t){var e,i;if("touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"touchcancel"==t.type){var s=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e=s.pageX,i=s.pageY}else"mousedown"!=t.type&&"mouseup"!=t.type&&"mousemove"!=t.type&&"mouseover"!=t.type&&"mouseout"!=t.type&&"mouseenter"!=t.type&&"mouseleave"!=t.type||(e=t.pageX,i=t.pageY);return{x:e,y:i}},matchShapeToCoords:function(t){for(var e=this.settings.spots.length-1;0<=e;e--){var i=this.settings.spots[e];if("poly"==i.type){var s=t.x/100*this.zoomWrap.width(),o=t.y/100*this.zoomWrap.height();if(isPointInsidePolygon(s=s*this.settings.general.naturalWidth/this.zoomWrap.width(),o=o*this.settings.general.naturalHeight/this.zoomWrap.height(),i.vs))return e}if("spot"==i.type){var n=i.width<44?44:i.width,a=i.height<44?44:i.height;n/=this.zoom,a/=this.zoom;s=t.x/100*this.wrap.width(),o=t.y/100*this.wrap.height();var r=i.x/100*this.wrap.width()-n/2,l=i.y/100*this.wrap.height()-a/2,h=n,p=a;if(1==parseInt(i.default_style.icon_is_pin,10)&&1==parseInt(i.default_style.use_icon,10)&&(l-=a/2,i.height<44&&(l+=i.height/2)),isPointInsideRect(s,o,r,l,h,p))return e}if("rect"==i.type&&isPointInsideRect(t.x,t.y,i.x,i.y,i.width,i.height))return e;if("oval"==i.type&&isPointInsideEllipse(s=t.x,o=t.y,i.x+i.width/2,i.y+i.height/2,r=i.width/2,l=i.height/2))return e;i.type}return-1},isPointInsideVisibleTooltip:function(t){for(var e=0;e<this.openedTooltips.length;e++){var i=this.getEventCoordinates(t),s=this.wrap.find('.imp-tooltip[data-index="'+this.openedTooltips[e]+'"]'),o=this.openedTooltips[e];i.x=(i.x-this.wrap.offset().left)/this.wrap.width()*100,i.y=(i.y-this.wrap.offset().top)/this.wrap.height()*100;var n=0;n="spot"==this.settings.spots[o].type?this.settings.spots[o].tooltip_style.buffer:this.settings.spots[o].tooltip_style.buffer*this.zoom;var a=s.outerWidth(),r=s.outerHeight(),l=s.offset().left-this.wrap.offset().left,h=s.offset().top-this.wrap.offset().top;l=l/this.wrap.width()*100,h=h/this.wrap.height()*100,a=a/this.wrap.width()*100,r=r/this.wrap.height()*100;var p=[];return"left"==this.settings.spots[o].tooltip_style.position&&(p=[[l,h],[l+a,h],[l+a+(n=n/this.wrap.width()*100),h+r-r/3-r/3],[l+a+n,h+r-r/3],[l+a,h+r],[l,h+r]]),"right"==this.settings.spots[o].tooltip_style.position&&(p=[[l,h],[l+a,h],[l+a,h+r],[l,h+r],[l-(n=n/this.wrap.width()*100),h+r-r/3],[l-n,h+r-r/3-r/3]]),"top"==this.settings.spots[o].tooltip_style.position&&(p=[[l,h],[l+a,h],[l+a,h+r],[l+a-a/3,h+r+(n=n/this.wrap.height()*100)],[l+a-a/3-a/3,h+r+n],[l,h+r]]),"bottom"==this.settings.spots[o].tooltip_style.position&&(p=[[l,h],[l+a-a/3-a/3,h-(n=n/this.wrap.height()*100)],[l+a-a/3,h-n],[l+a,h],[l+a,h+r],[l,h+r]]),!!isPointInsidePolygon(i.x,i.y,p)}},getIndexOfShapeWithID:function(t){for(var e=0;e<this.settings.spots.length;e++)if(this.settings.spots[e].id==t)return e},calcStyles:function(t,e){var i=this.settings.spots[e],s="";if("spot"==i.type){s+="left: "+i.x+"%;",s+="top: "+i.y+"%;",s+="width: "+i.width+"px;",s+="height: "+i.height+"px;",s+="opacity: "+t.opacity+";",s+="transform: scale("+1/this.zoom+");";var o=-i.width/2,n=-i.height/2;if(0==parseInt(i.default_style.use_icon,10)){var a=hexToRgb(t.background_color)||{r:0,b:0,g:0},r=hexToRgb(t.border_color)||{r:0,b:0,g:0};s+="border-radius: "+t.border_radius+"px;",s+="background: rgba("+a.r+", "+a.g+", "+a.b+", "+t.background_opacity+");",s+="border-width: "+t.border_width+"px;",s+="border-style: "+t.border_style+";",s+="border-color: rgba("+r.r+", "+r.g+", "+r.b+", "+t.border_opacity+");"}1==parseInt(i.default_style.use_icon,10)&&1==parseInt(i.default_style.icon_is_pin,10)&&(o=-i.height),s+="margin-left: "+n+"px;",s+="margin-top: "+o+"px;"}if("text"==i.type){var l=hexToRgb(i.text.text_color);s+="left: "+i.x+"%;",s+="top: "+i.y+"%;",s+="font-family: "+i.text.font_family+";",s+="font-size: "+i.text.font_size+"px;",s+="font-weight: "+i.text.font_weight+";",s+="color: rgba("+l.r+", "+l.g+", "+l.b+", "+i.text.text_opacity+");"}if("rect"==i.type||"oval"==i.type){var h=t.border_radius+"px";"oval"==i.type&&(h="50% 50%"),a=hexToRgb(t.background_color)||{r:0,b:0,g:0},r=hexToRgb(t.border_color)||{r:0,b:0,g:0},s+="left: "+i.x+"%;",s+="top: "+i.y+"%;",s+="width: "+i.width+"%;",s+="height: "+i.height+"%;",s+="opacity: "+t.opacity+";",s+="background: rgba("+a.r+", "+a.g+", "+a.b+", "+t.background_opacity+");",s+="border-width: "+t.border_width+"px;",s+="border-style: "+t.border_style+";",s+="border-color: rgba("+r.r+", "+r.g+", "+r.b+", "+t.border_opacity+");",s+="border-radius: "+h+";"}if("poly"==i.type){var p=hexToRgb(t.fill)||{r:0,b:0,g:0},g=hexToRgb(t.stroke_color)||{r:0,b:0,g:0};s+="opacity: "+t.opacity+";",s+="fill: rgba("+p.r+", "+p.g+", "+p.b+", "+t.fill_opacity+");",s+="stroke: rgba("+g.r+", "+g.g+", "+g.b+", "+t.stroke_opacity+");",s+="stroke-width: "+t.stroke_width+"px;",s+="stroke-dasharray: "+t.stroke_dasharray+";",s+="stroke-linecap: "+t.stroke_linecap+";"}return s},applyStyles:function(t,e){var i=this.settings.spots[e],s=this.wrap.find("#"+i.id),o=this.calcStyles(t,e);s.attr("style",o),"spot"==i.type&&0<s.find("path").length&&s.find("path").attr("style","fill:"+t.icon_fill)},highlightShape:function(t,e){var i=this.settings.spots[t];if(e&&""!=i.connected_to){var s=this.getIndexOfShapeWithID(i.connected_to);this.highlightShape(s,!0)}else{if(this.connectedShapes[i.id])for(var o=0;o<this.connectedShapes[i.id].length;o++)s=this.connectedShapes[i.id][o].index,this.highlightShape(s,!1);this.applyStyles(this.settings.spots[t].mouseover_style,t),$.imageMapProEventHighlightedShape(this.settings.general.name,i.title),-1==this.highlightedShapes.indexOf(t)&&this.highlightedShapes.push(t)}},unhighlightShape:function(t){var e=this.settings.spots[t];if(-1==this.apiHighlightedShapes.indexOf(t)){this.applyStyles(e.default_style,t),$.imageMapProEventUnhighlightedShape(this.settings.general.name,e.title);var i=this.highlightedShapes.indexOf(t);this.highlightedShapes.splice(i,1)}},unhighlightAllShapes:function(){for(var t=this.highlightedShapes.slice(0),e=0;e<t.length;e++)this.unhighlightShape(t[e])},isShapeHighlighted:function(t){for(var e=0;e<this.highlightedShapes.length;e++)if(this.highlightedShapes[e]==t)return!0;return!1},performClickAction:function(i){var s=this.settings.spots[i];"follow-link"==s.actions.click&&(0==$("#imp-temp-link").length&&$("body").append('<a href="" id="imp-temp-link" target="_blank"></a>'),$("#imp-temp-link").attr("href",s.actions.link),1==parseInt(s.actions.open_link_in_new_window,10)?$("#imp-temp-link").attr("target","_blank"):$("#imp-temp-link").removeAttr("target"),$("#imp-temp-link")[0].click()),"run-script"==s.actions.click&&eval(s.actions.script.replace("<br>","")),$.imageMapProEventClickedShape(this.settings.general.name,this.settings.spots[i].title)},showTooltip:function(t,e){var i=this.settings.spots[t];if(""==i.connected_to||1!=parseInt(i.use_connected_shape_tooltip,10)){if(-1==this.openedTooltips.indexOf(t)){if(0<this.openedTooltips.length&&this.hideAllTooltips(),-1==this.openedTooltips.indexOf(t)&&this.openedTooltips.push(t),"mobile-only"==this.settings.tooltips.fullscreen_tooltips&&isMobile()||"always"==this.settings.tooltips.fullscreen_tooltips){this.visibleFullscreenTooltip=$('.imp-fullscreen-tooltip[data-index="'+t+'"]'),this.visibleFullscreenTooltipIndex=t,this.fullscreenTooltipsContainer.show(),this.visibleFullscreenTooltip.show();var s=this;setTimeout(function(){s.visibleFullscreenTooltip.addClass("imp-tooltip-visible")},20),this.fullscreenTooltipVisible=!0,this.bodyOverflow=$("body").css("overflow"),$("body").css({overflow:"hidden"})}else{var o=this.wrap.find('.imp-tooltip[data-index="'+t+'"]');o.show(),setTimeout(function(){o.addClass("imp-tooltip-visible")},1),this.measureTooltipSize(t),this.updateTooltipPosition(t,e)}$.imageMapProEventOpenedTooltip(this.settings.general.name,this.settings.spots[t].title)}}else{var n=this.getIndexOfShapeWithID(i.connected_to);this.showTooltip(n)}},hideTooltip:function(t){if(-1==this.apiOpenedTooltips.indexOf(t)){var e=this.openedTooltips.indexOf(t);if(this.openedTooltips.splice(e,1),"mobile-only"==this.settings.tooltips.fullscreen_tooltips&&isMobile()||"always"==this.settings.tooltips.fullscreen_tooltips){var i=this;(s=this.fullscreenTooltipsContainer.find('.imp-fullscreen-tooltip[data-index="'+t+'"]')).removeClass("imp-tooltip-visible"),setTimeout(function(){i.fullscreenTooltipsContainer.hide(),s.hide()},200),this.fullscreenTooltipVisible=!1,$("body").css({overflow:this.bodyOverflow})}else{var s;(s=this.wrap.find('.imp-tooltip[data-index="'+t+'"]')).removeClass("imp-tooltip-visible"),setTimeout(function(){s.hide()},200)}$.imageMapProEventClosedTooltip(this.settings.general.name,this.settings.spots[t].title)}},hideAllTooltips:function(){for(var t=this.openedTooltips.slice(0),e=0;e<t.length;e++)this.hideTooltip(t[e])},updateTooltipPosition:function(t,e){if(!this.fullscreenTooltipVisible){var i,s,o,n,a,r,l,h;s=(i=this.wrap.find('.imp-tooltip[data-index="'+t+'"]')).data("imp-measured-width"),o=i.data("imp-measured-height"),h=this.settings.spots[t];var p,g,d=this.wrap.width(),c=this.wrap.height(),u=this.wrap.offset().left,m=this.wrap.offset().top,f=window.innerWidth,v=window.innerHeight;if(1==parseInt(this.settings.tooltips.sticky_tooltips,10)&&e){var _=this.getEventCoordinates(e);n=_.x-u,a=_.y-m,l=r=0}else r=h.width/100*d,l=h.height/100*c,r*=this.zoom,l*=this.zoom,n=Math.round(10*h.x)/10/100*d,a=Math.round(10*h.y)/10/100*c,n=n*this.zoom+this.actualPanX,a=a*this.zoom+this.actualPanY;"spot"==h.type&&(n-=h.width/2,a-=h.height/2,r=h.width,l=h.height),"spot"==h.type&&1==parseInt(h.default_style.icon_is_pin,10)&&"spot"==h.type&&1==parseInt(h.default_style.use_icon,10)&&(a-=l/2),1==parseInt(this.settings.runtime.is_fullscreen,10)?(n+u<0&&(r=r+n+u,n=-u),f<n+u+r&&(r+=f-(n+u+r)),a+m<0&&(l=l+a+m,a=-m),v<a+m+l&&(l+=v-(a+m+l))):(n<0&&(r+=n,n=0),d<n+r&&(r=d-n),a<0&&(l+=a,a=0),c<a+l&&(l=c-a)),"left"==h.tooltip_style.position&&(p=n-s-20,g=a+l/2-o/2),"right"==h.tooltip_style.position&&(p=n+r+20,g=a+l/2-o/2),"top"==h.tooltip_style.position&&(p=n+r/2-s/2,g=a-o-20),"bottom"==h.tooltip_style.position&&(p=n+r/2-s/2,g=a+l+20);var y={x:p,y:g};1==parseInt(this.settings.tooltips.constrain_tooltips,10)&&((y=fitRectToScreen(p+u,g+m,s,o)).x-=u,y.y-=m),1==parseInt(this.settings.runtime.is_fullscreen,10)&&(y.x+=u,y.y+=m),i.css({left:y.x,top:y.y})}},toggleFullscreen:function(){if(0==parseInt(this.settings.runtime.is_fullscreen,10)){$("body").addClass("imp-fullscreen-mode");var t=$.extend(!0,{},this.settings);t.runtime.is_fullscreen=1,t.id="999999",t.general.responsive=0;var e="";e+="background: "+this.settings.fullscreen.fullscreen_background,$("body").append('<div id="imp-fullscreen-wrap" style="'+e+'"><div id="image-map-pro-'+t.id+'"></div></div>'),$("#image-map-pro-"+t.id).imageMapPro(t),this.disableEvents(),fullscreenMapParent=this}else $("body").removeClass("imp-fullscreen-mode"),$("#imp-fullscreen-wrap").remove(),this.disableEvents(),fullscreenMapParent.events()},resetZoomAndPan:function(){this.zoom=1,this.targetZoom=1,this.targetPanX=0,this.targetPanY=0,this.actualPanX=0,this.actualPanY=0,this.redraw()},zoomIn:function(t){if(this.targetZoom<this.maxZoomLevel){var e=this.zoom*this.zoomMultiplier,i=0,s=0,o=this.wrap.width(),n=this.wrap.height();s=t?(i=t.pageX,t.pageY):(i=this.wrap.offset().left+o/2,this.wrap.offset().top+n/2),this.applyZoom(e,i,s)}},zoomOut:function(t){if(1<this.targetZoom){var e=this.zoom/this.zoomMultiplier,i=0,s=0,o=this.wrap.width(),n=this.wrap.height();s=t?(i=t.pageX,t.pageY):(i=this.wrap.offset().left+o/2,this.wrap.offset().top+n/2),this.applyZoom(e,i,s)}},applyZoom:function(t,e,i){this.targetZoom=this.zoom,this.targetPanX=this.actualPanX,this.targetPanY=this.actualPanY,this.redraw(),t>this.maxZoomLevel&&(t=this.maxZoomLevel),t<1&&(t=1),this.targetZoom=t;var s=this.wrap.width(),o=this.wrap.height(),n=e-this.zoomWrap.offset().left,a=i-this.zoomWrap.offset().top,r=(s*this.targetZoom-s*this.zoom)/2,l=(o*this.targetZoom-o*this.zoom)/2,h=r*((s*this.zoom/2-n)/(s*this.zoom/2)),p=l*((o*this.zoom/2-a)/(o*this.zoom/2));this.targetPanX-=r,this.targetPanY-=l,this.targetPanX+=h,this.targetPanY+=p;for(var g=0;g<this.settings.spots.length;g++){var d=this.settings.spots[g];"spot"==d.type&&this.wrap.find("#"+d.id).css({transform:"scale("+1/this.targetZoom+")"})}this.hideAllTooltips(),this.redraw()},pan:function(t,e){this.actualPanX=this.initialPanX-(this.ix-t),this.actualPanY=this.initialPanY-(this.iy-e);var i=this.wrap.width(),s=this.wrap.height(),o=this.wrap.offset().left,n=this.wrap.offset().top,a=window.innerWidth,r=window.innerHeight;1==parseInt(this.settings.runtime.is_fullscreen,10)?(i*this.zoom>a?(this.actualPanX>-o&&(this.actualPanX=-o),this.actualPanX<a-i*this.targetZoom-o&&(this.actualPanX=a-i*this.targetZoom-o)):this.actualPanX=(i-i*this.targetZoom)/2,s*this.zoom>r?(this.actualPanY>-n&&(this.actualPanY=-n),this.actualPanY<r-s*this.targetZoom-n&&(this.actualPanY=r-s*this.targetZoom-n)):this.actualPanY=(s-s*this.targetZoom)/2):(0<this.actualPanX&&(this.actualPanX=0),0<this.actualPanY&&(this.actualPanY=0),this.actualPanX<i-i*this.targetZoom&&(this.actualPanX=i-i*this.targetZoom),this.actualPanY<s-s*this.targetZoom&&(this.actualPanY=s-s*this.targetZoom)),this.panDeltaY=Math.abs(this.actualPanY-this.targetPanY),this.targetPanX=this.actualPanX,this.targetPanY=this.actualPanY,this.hideAllTooltips(),this.redraw()},panTo:function(t,e){var i=-t+this.wrap.width()/2,s=-e+this.wrap.height()/2;this.panDeltaY=Math.abs(s-this.targetPanY),this.targetPanX=i,this.targetPanY=s,this.hideAllTooltips(),this.redraw()},pinch:function(t){var e=(t.originalEvent.touches[0].pageX+t.originalEvent.touches[1].pageX)/2,i=(t.originalEvent.touches[0].pageY+t.originalEvent.touches[1].pageY)/2;this.actualPanX+=e-this.lastX,this.actualPanY+=i-this.lastY;var s=this.wrap.width(),o=this.wrap.height(),n=this.wrap.offset().left,a=this.wrap.offset().top,r=window.innerWidth,l=window.innerHeight;1==parseInt(this.settings.runtime.is_fullscreen,10)?(s*this.zoom>r?(this.actualPanX>-n&&(this.actualPanX=-n),this.actualPanX<r-s*this.targetZoom-n&&(this.actualPanX=r-s*this.targetZoom-n)):this.actualPanX=(s-s*this.targetZoom)/2,o*this.zoom>l?(this.actualPanY>-a&&(this.actualPanY=-a),this.actualPanY<l-o*this.targetZoom-a&&(this.actualPanY=l-o*this.targetZoom-a)):this.actualPanY=(o-o*this.targetZoom)/2):(0<this.actualPanX&&(this.actualPanX=0),0<this.actualPanY&&(this.actualPanY=0),this.actualPanX<s-s*this.targetZoom&&(this.actualPanX=s-s*this.targetZoom),this.actualPanY<o-o*this.targetZoom&&(this.actualPanY=o-o*this.targetZoom)),this.lastX=e,this.lastY=i;var h=Math.sqrt(Math.pow(t.originalEvent.touches[1].pageX-t.originalEvent.touches[0].pageX,2)+Math.pow(t.originalEvent.touches[1].pageY-t.originalEvent.touches[0].pageY,2))/this.pinchInitialDistance;this.applyZoom(this.pinchInitialZoom*h,e,i)},redraw:function(){var t=this.wrap.width(),e=this.wrap.height();if(1==parseInt(this.settings.runtime.is_fullscreen,10)){var i=this.wrap.offset().left,s=this.wrap.offset().top,o=$(window).width(),n=$(window).height();t*this.zoom>o?(this.targetPanX>-i&&(this.targetPanX=-i),this.targetPanX<o-t*this.targetZoom-i&&(this.targetPanX=o-t*this.targetZoom-i)):this.targetPanX=(t-t*this.targetZoom)/2,e*this.zoom>n?(this.targetPanY>-s&&(this.targetPanY=-s),this.targetPanY<n-e*this.targetZoom-s&&(this.targetPanY=n-e*this.targetZoom-s)):this.targetPanY=(e-e*this.targetZoom)/2}else 0<this.targetPanX&&(this.targetPanX=0),0<this.targetPanY&&(this.targetPanY=0),this.targetPanX<t-t*this.targetZoom&&(this.targetPanX=t-t*this.targetZoom),this.targetPanY<e-e*this.targetZoom&&(this.targetPanY=e-e*this.targetZoom);this.zoom=lerp(this.zoom,this.targetZoom,.1),this.actualPanX=lerp(this.actualPanX,this.targetPanX,.1),this.actualPanY=lerp(this.actualPanY,this.targetPanY,.1),Math.abs(this.zoom-this.targetZoom)<.001&&(this.zoom=this.targetZoom),Math.abs(this.actualPanX-this.targetPanX)<1&&(this.actualPanX=this.targetPanX),Math.abs(this.actualPanY-this.targetPanY)<1&&(this.actualPanY=this.targetPanY),this.zoomWrap.css({transform:"scale("+this.zoom+", "+this.zoom+")"}),this.translateWrap.css({transform:"translate("+this.actualPanX+"px, "+this.actualPanY+"px)"}),this.uiNavigatorWindow&&this.uiNavigatorWindow.css({transform:"scale("+1/this.zoom+", "+1/this.zoom+") translate("+(-this.actualPanX*this.navigatorRatio+this.navigatorMarginX)+"px, "+(-this.actualPanY*this.navigatorRatio+this.navigatorMarginY)+"px)"});var a=this;this.zoom==this.targetZoom&&this.actualPanX==this.targetPanX&&this.actualPanY==this.targetPanY||window.requestAnimationFrame(function(){a.redraw()})}}),$.fn[pluginName]=function(t){return this.each(function(){$.data(this,"plugin_"+pluginName,new Plugin(this,t))})}}(jQuery,window,document),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(d){function e(t){var e=t||window.event,i=v.call(arguments,1),s=0,o=0,n=0,a=0,r=0,l=0;if((t=d.event.fix(e)).type="mousewheel","detail"in e&&(n=-1*e.detail),"wheelDelta"in e&&(n=e.wheelDelta),"wheelDeltaY"in e&&(n=e.wheelDeltaY),"wheelDeltaX"in e&&(o=-1*e.wheelDeltaX),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(o=-1*n,n=0),s=0===n?o:n,"deltaY"in e&&(s=n=-1*e.deltaY),"deltaX"in e&&(o=e.deltaX,0===n&&(s=-1*o)),0!==n||0!==o){if(1===e.deltaMode){var h=d.data(this,"mousewheel-line-height");s*=h,n*=h,o*=h}else if(2===e.deltaMode){var p=d.data(this,"mousewheel-page-height");s*=p,n*=p,o*=p}if(a=Math.max(Math.abs(n),Math.abs(o)),(!f||a<f)&&(u(e,f=a)&&(f/=40)),u(e,a)&&(s/=40,o/=40,n/=40),s=Math[1<=s?"floor":"ceil"](s/f),o=Math[1<=o?"floor":"ceil"](o/f),n=Math[1<=n?"floor":"ceil"](n/f),_.settings.normalizeOffset&&this.getBoundingClientRect){var g=this.getBoundingClientRect();r=t.clientX-g.left,l=t.clientY-g.top}return t.deltaX=o,t.deltaY=n,t.deltaFactor=f,t.offsetX=r,t.offsetY=l,t.deltaMode=0,i.unshift(t,s,o,n),m&&clearTimeout(m),m=setTimeout(c,200),(d.event.dispatch||d.event.handle).apply(this,i)}}function c(){f=null}function u(t,e){return _.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var m,f,t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],v=Array.prototype.slice;if(d.event.fixHooks)for(var s=t.length;s;)d.event.fixHooks[t[--s]]=d.event.mouseHooks;var _=d.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],e,!1);else this.onmousewheel=e;d.data(this,"mousewheel-line-height",_.getLineHeight(this)),d.data(this,"mousewheel-page-height",_.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],e,!1);else this.onmousewheel=null;d.removeData(this,"mousewheel-line-height"),d.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var e=d(t),i=e["offsetParent"in d.fn?"offsetParent":"parent"]();return i.length||(i=d("body")),parseInt(i.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(t){return d(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};d.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})});